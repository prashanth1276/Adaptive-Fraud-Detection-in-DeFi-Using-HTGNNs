sequenceDiagram
    autonumber
    participant H as Admin/Human
    participant DB as Streamlit Dashboard
    participant KG as Knowledge Graph (Neo4j)
    participant AI as HTGNN Engine (Model)

    Note over H, DB: 1. Address Analysis Request
    H->>DB: Enter Ethereum Address
    DB->>KG: Fetch Temporal Subgraph (≤ last activity)
    KG-->>DB: Return Subgraph (nodes + edges)

    Note over DB, AI: 2. Inference
    DB->>AI: Forward Subgraph + Current Time
    AI->>AI: Time Encoding (Δt) & 8-Head Attention
    AI-->>DB: Risk Score

    Note over DB, H: 3. Alert & Explainability
    alt Risk Score > Threshold (0.5306)
        DB->>DB: Render Subgraph with Highlighted Target
        DB-->>H: Show HIGH RISK + Explanation Tables
    else
        DB-->>H: Show LOW/MEDIUM RISK
    end

    Note over H, KG: 4. Adaptive Learning Loop
    H->>DB: Click "Fine‑Tune Model" (Correct Label)
    DB->>KG: Update Node Label
    DB->>AI: Trigger Fine‑Tuning on Subgraph
    AI->>AI: Low‑LR Training (15 epochs)
    AI-->>DB: Model Weights Updated
    DB-->>H: Confirmation + Updated Risk Score